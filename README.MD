# <center>**Курсовий проєкт**</center>
## Тема:  "Дистанційний контроль температури людей в приміщенні"

### <center> Розробкою курсового проєкту займаються студенти групи АК-1-1: </center>

### Кострикін Олександр, Пекарчук Катерина, Попчук Дмитро та Штефан Ілля (Team Lead) 

## <center>Загальна інформація  про проєкт:</center>
> Система "**Дистанційний контроль температури людей в приміщенні**" повинна забезпечувати дистанційне вимірювання температури людей в приміщенні з веденням журналу та формуванням повідомлень. 
>

 ## <center>Розділ№1. Вимоги до проєкту:</center>
> Система повинна передбачати виконання наступних функцій:
>
> 1. Система повинна вимірювати температуру людини (**у ℃**)  на відстанні (**min 10см, max - 20см**):
> > * Вимірювання  повинне здійснюватися після того, як людина буде у полі видимості датчика температури;
> > * Якщо темература задовільна (**35.8 - 37.2**), то індикатор(**світлодіод**) має горіти  <span style="color:green">**зеленим**</span>;
> > * Якщо температура незадовільна (**нижча 35.8 або вища 37.2**), то індикатор(**світлодіод**) має блимати  <span style="color:red">**червоним**</span>;
> 
> 2. Після виміру температури, результати вимірювання повинні:
> > * Відобразитися на екрані(**Dashboard**);
> > * Надійти у вигляді повідомлення з **Telegram бота** по типу: *"Температура тіла - (t ℃), задовільна"*  або *"Температура тіла - (t ℃), незадовільна"* ;
> > * Занотуватися до електронної таблиці **Google Sheets**;
> 

<kbd>
  <img src="/img/project-scheme.jpg" />
</kbd>

### <center> Вимоги до видів забезпечення:</center>

#### <center>Вимоги до апартного забезпечення:</center>
> * Мікрокомп'ютер [Raspberry Pi](https://uk.wikipedia.org/wiki/Raspberry_Pi) (RPi3 або RPi4) - *1шт*;
> * Підключення RPI до мережі Internet через мережу WiFi або Ethernet;
> * Пірометричний датчик температури [MLX90614](https://arduino.ua/prod1431-modyl-beskontaktnogo-termmetra-mlx90614) - *1шт*;
> * Cмартфон або планшет з Android > v.7 - *1шт*;
> 

#### <center>Вимоги до програмного забезпечення:</center>
> * Вебсервіс [GitHub](https://github.com);
> *  Інструмент для візуального програмування [Node-Red](https://uk.wikipedia.org/wiki/Node-RED);
> *  [Бази даних](https://uk.wikipedia.org/wiki/База_даних) та мова [SQL](https://uk.wikipedia.org/wiki/SQL);
> *  Електронні таблиці [Google Sheets](https://www.google.com/sheets/about/);
> *  Мова програмування [Java Script](https://uk.wikipedia.org/wiki/JavaScript);
> *  Програма [Fritzing](https://uk.wikipedia.org/wiki/Fritzing) (для побудови схем);
> *  Telegram-bot(для моніторингу результатів вимірювань);
>  

## <center>Розділ№2. Розробка архітектури та необхідної проєктної документації:</center>

### <center>Технічна структура системи:</center>
<kbd>
  <img src="/img/Technical structure of the system.jpg" />
</kbd>

**Рис.1**

#### <center>Принципова схема підключення:</center>

<kbd>
  <img src="/img/scheme-test_схема.jpg" />
</kbd>

**Рис.2**

#### <center>Монтажна схема підключення:</center>

<kbd>
  <img src="/img/scheme-test_МП.jpg" />
</kbd>

**Рис.3**

### <center>Відомість апаратних та програмних засобів:</center>

**Таб.1**

|         Найменування          |                          Посилання                           | Кількість |                          Примітки                          |
| :---------------------------: | :----------------------------------------------------------: | :-------: | :--------------------------------------------------------: |
|      Raspberry Pi (3/4)       | [Raspberry Pi](https://raspberrypi.in.ua/product-category/catalog/mini-kompyutery/minikompyutery-raspberry-pi/) |     1     | У комплекті з корпусом, блоком живлення та картою пам'яті. |
|       Макетна плата 830       | [ MB-102 830](https://arduino.ua/prod361-maketnaya-plata-mb-102-830-otverstii) |     1     |                                                            |
| Пірометричний датчик MLX90614 | [MLX90614](https://arduino.ua/prod1431-modyl-beskontaktnogo-termmetra-mlx90614) |     1     |                                                            |
|     Світлодіод(GREEN+RED)     |                              -                               |     2     |    1 - зелений, червоний.                                                          |
|       Резистор (1 кОм)        |                              -                               |     2     |                                                            |
|   Провід dupont (мама-тато)   |                              -                               |     8     |    3 - червоні; 2 - чорні; 1 - жовтий, синій, зелений.     |

> **Пірометричний датчик MLX90614** - призначений для безконтактного вимірювання абсолютної температури об'єктів. Дані температури можна зчитувати як через цифровий інтерфейс SMBus (аналогічний I2C) так і через PWM-вихід з частотою PWM 10Гц або 1000Гц. Використовуваний датчик MLX90614 має широкі можливості з програмування, калібрування та конфігурації. Модуль має зручні отвори для кріплення, внутрішній стабілізатор, конденсатори фільтра з живлення та підтягувальні резистори на цифровій шині.
>

<kbd>
  <img src="/img/mlx90614.jpeg" />
</kbd>

**Рис.4**

**Таб.2**

### <center>Характеристики:</center>

| Тип                                    | Назва           |
| :------------------------------------- | --------------- |
| Використовуваний чіп                   | MLX90614ESF-BAA |
| Напруга живлення                       | 3....5.5 В      |
| Вихідний інтерфейс                     | I2C або PWM     |
| Діапазон виміру температури (об'єкт)   | -70...+380 °С   |
| Діапазон виміру температури (довкілля) | -40...+85 °С    |
| Точність показань температури          | ±0.5 °С         |
| Розміри плати                          | 16х11мм         |
| Робота з Node-Red                      | Так             |

#### <center>Принцип роботи:</center>

> **Принцип роботи**
> > Принцип роботи датчика заснований на законі Стефана - Больцмана, який говорить про те, що кожне нагріте тіло випромінює інфрачервону енергію, інтенсивність якої прямо пропорційна температурі цього тіла. Виявляючий елемент датчика вимірює  яку кількість енергії інфрачервоної енергії випромінюється обраним об'єктом, а обчислювальний блок конвертує це значення енергії значення температури використовуючи вбудований 17-бітний АЦП (аналого-цифровий перетворювач). На вихід датчика інформація про температуру передається за інтерфейсом **I2C**.
> 

#### <center>Розпиновка пристрою:</center>

<kbd>
  <img src="/img/mlx-90614.jpg" />
</kbd>

**Рис.5**

**Таб.3**

| Назва       | Характеристика                  |
| :---------- | ------------------------------- |
| **VDD**     | блок живлення (3,3 або 5 вольт) |
| **SCL**     | i2c/SMBus  годинник             |
| **SDA**     | i2c/SMBus  дані або PWM вихід   |
| **VSS/GND** | Ground                          |

#### <center>Підключення пристрою до Raspberry Pi:</center>

> Підключення пристрою до Raspberry Pi  відбувається за наступною схемою :

<kbd>
  <img src="/img/mlx_connection.jpeg" />
</kbd>

**Рис.6**

> Цитую слова самого автора, який підключав прилад до  Raspberry Pi:
> > " **R1** і **R2** – **4K7** є необов’язковими, оскільки Raspberry містить такі резистори. Його можна використовувати лише у випадку «довгий» лінії.
Конденсатор **C1** важливий і повинен бути розміщений якомога ближче до пристрою.
Ще одне важливе зауваження щодо напруги! Raspberry PI – це пристрій на **3,3 В**, який не витримує входів **5 В**. Тож у випадку пристрою **MLX 5v** слід використовувати додатковий перемикач напруги!
За замовчуванням пристрій працює в режимі **SMBus**, але мій зразок був у режимі **PWM**. Що мене на деякий час спантеличило, так це  **i2c bus** був наповнений випадковими  чиселами. Але після підключення осцилографа я нарешті зрозумів, що відбувається, і перевів **MLX** у «звичайний» режим **SMBus**.
Перемикання просте – потягніть штифт **SCL** до **Ground** на короткий час. Після скидання пристрій повертається до вихідного робочого режиму. Для постійного перемикання деякі значення **EEPROM** слід виправити. Читання та запис **EEPROM** буде обговорено нижче. "
>

### <center> Програмна структура системи:</center>

> 1. ПЗ для Raspberry Pi:
> > * ОС: Raspbian;
> > * Середовище Node-RED;
> > * Модулі Node-RED(***у процесі написання...***): 
> 

> 2. Хмарні застосунки та сервіси:
> > * GitHub;
> > * Google Sheets;
> 

> 3. ПЗ для Android:
> > * Telegram(+bot);
> 

## <center>План роботи:</center>

#### Етап№0 "Початок"
1.  - [x] Вибрати тему проєкту;
2.  - [x] Обрати спосіб виконання роботи;
      
#### Етап№1 "Робота з Github"
1. - [x] Створити та оформити README.MD;
2. - [x] Створити репозиторій;
2. - [x] Дотати всіх  учасників до репозиторію;
4. - [x] Створити Issue;
5. - [x] Кожен учасник ознайомився з Git;
6. - [x] Кожен учасник проєкту створив власну гілку;

#### Етап№2 "Робота з Fritzing"
1. - [ ]   Створити апаратну схему;
***у процесі написання...***

#### Етап№3 "Робота з Node-Red"
1. - [ ]  Створити проєкт в Node-Red та зашифрувати його;
***у процесі написання...***

#### Етап№4
***у процесі написання...***
